/**
 * skylark-sphere - A version of sphere that ported to running on skylarkjs
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-integration/skylark-sphere/
 * @license MIT
 */
define(["../_psv/ctoc","../PSVUtils","./PSVComponent"],function(t,e,o){"use strict";function n(t){o.call(this,t),this.content=null,this.prop={mouse_x:0,mouse_y:0,mousedown:!1,opened:!1},this.create()}return n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.className="psv-panel",n.publicMethods=["showPanel","hidePanel"],n.prototype.create=function(){o.prototype.create.call(this),this.container.innerHTML='<div class="psv-panel-resizer"></div><div class="psv-panel-close-button"></div><div class="psv-panel-content"></div>',this.content=this.container.querySelector(".psv-panel-content"),this.container.querySelector(".psv-panel-close-button").addEventListener("click",this.hidePanel.bind(this)),this.psv.config.mousewheel&&this.container.addEventListener(t.SYSTEM.mouseWheelEvent,function(t){t.stopPropagation()});var e=this.container.querySelector(".psv-panel-resizer");e.addEventListener("mousedown",this),e.addEventListener("touchstart",this),this.psv.container.addEventListener("mouseup",this),this.psv.container.addEventListener("touchend",this),this.psv.container.addEventListener("mousemove",this),this.psv.container.addEventListener("touchmove",this)},n.prototype.destroy=function(){this.psv.container.removeEventListener("mousemove",this),this.psv.container.removeEventListener("touchmove",this),this.psv.container.removeEventListener("mouseup",this),this.psv.container.removeEventListener("touchend",this),delete this.prop,delete this.content,o.prototype.destroy.call(this)},n.prototype.handleEvent=function(t){switch(t.type){case"mousedown":this._onMouseDown(t);break;case"touchstart":this._onTouchStart(t);break;case"mousemove":this._onMouseMove(t);break;case"touchmove":this._onTouchMove(t);break;case"mouseup":case"touchend":this._onMouseUp(t)}},n.prototype.showPanel=function(t,o){this.content.innerHTML=t,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),e.toggleClass(this.content,"psv-panel-content--no-margin",!0===o),this.prop.opened=!0,this.psv.trigger("open-panel")},n.prototype.hidePanel=function(){this.content.innerHTML=null,this.prop.opened=!1,this.container.classList.remove("psv-panel--open"),this.psv.trigger("close-panel")},n.prototype._onMouseDown=function(t){t.stopPropagation(),this._startResize(t)},n.prototype._onTouchStart=function(t){t.stopPropagation(),this._startResize(t.changedTouches[0])},n.prototype._onMouseUp=function(t){this.prop.mousedown&&(t.stopPropagation(),this.prop.mousedown=!1,this.content.classList.remove("psv-panel-content--no-interaction"))},n.prototype._onMouseMove=function(t){this.prop.mousedown&&(t.stopPropagation(),this._resize(t))},n.prototype._onTouchMove=function(t){this.prop.mousedown&&this._resize(t.touches[0])},n.prototype._startResize=function(t){this.prop.mouse_x=parseInt(t.clientX),this.prop.mouse_y=parseInt(t.clientY),this.prop.mousedown=!0,this.content.classList.add("psv-panel-content--no-interaction")},n.prototype._resize=function(t){var e=parseInt(t.clientX),o=parseInt(t.clientY);this.container.style.width=this.container.offsetWidth-(e-this.prop.mouse_x)+"px",this.prop.mouse_x=e,this.prop.mouse_y=o},n});
//# sourceMappingURL=../sourcemaps/components/PSVPanel.js.map
